<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>UI Recorder Pro Documentation</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="report">
  <main class="docs">
    <h1>UI Recorder Pro — Documentation</h1>
    <p>Version 1.7.0. This release extends capture/report stability with stronger editor memory controls, reordering workflows, and report theme improvements.</p>

    <h2>Version Notes (v1.7.0)</h2>
    <ul>
      <li>Report editor now supports practical reordering for merge workflows (step move controls and timeline drag/drop).</li>
      <li>Cross-tab timeline supports Draw + Swap controls directly in timeline cards.</li>
      <li>Annotation editor lifecycle hardened for large reports:
        lazy allocation on open, idle teardown, and close-to-commit screenshot flattening.</li>
      <li>Replay hints converted to actionable shortcuts (filter/jump helpers).</li>
      <li>Report theme toggle added with icon preview (sun/clouds and moon/clouds) plus a darker low-glare dark mode.</li>
      <li>All existing v1.6.0 recorder stability and export/import improvements are retained.</li>
    </ul>

    <h2>Install (Temporary Add-on)</h2>
    <ul>
      <li>Open <code>about:debugging#/runtime/this-firefox</code> in Firefox.</li>
      <li>Click <strong>Load Temporary Add-on…</strong></li>
      <li>Select <code>manifest.json</code> from the extension folder.</li>
    </ul>

    <h2>Quick Start</h2>
    <ol>
      <li>Click the toolbar icon.</li>
      <li>Press <strong>Start</strong>.</li>
      <li>Perform your workflow.</li>
      <li>Press <strong>Stop</strong>.</li>
      <li>Open report and export as HTML or raw ZIP as needed.</li>
    </ol>

    <h2>Configuration How-To Templates</h2>

    <h3>Template 0: Strict Active Tab Following</h3>
    <p>Use when multiple tabs/windows are open and only foreground interactions should be captured.</p>
    <ul>
      <li><strong>Follow active tab only (strict)</strong>: On</li>
      <li><strong>Capture mode</strong>: All events</li>
      <li><strong>Auto-resume on tab focus</strong>: On</li>
      <li><strong>Limitation</strong>: when Firefox has no focused window, capture is temporarily paused until focus returns.</li>
    </ul>

    <h3>Template A: Dynamic Dashboard / SPA</h3>
    <p>Use for pages with live updates, modals, and in-place content refreshes.</p>
    <ul>
      <li><strong>Capture mode</strong>: All events</li>
      <li><strong>Page watch (dynamic UI)</strong>: On</li>
      <li><strong>Page watch interval (ms)</strong>: 500 to 1200</li>
      <li><strong>Diff-based screenshots</strong>: On</li>
      <li><strong>Debounce (ms)</strong>: 700 to 1000</li>
    </ul>

    <h3>Template B: Login / Sensitive Workflow</h3>
    <p>Use for authentication and secure change-control walkthroughs.</p>
    <ul>
      <li><strong>Capture mode</strong>: All events</li>
      <li><strong>Redact sensitive text in report</strong>: On</li>
      <li><strong>Redact usernames on login pages</strong>: On</li>
      <li><strong>Page watch (dynamic UI)</strong>: On</li>
      <li><strong>Page watch interval (ms)</strong>: 600 to 1000</li>
    </ul>

    <h3>Template C: Long Session / Low Memory</h3>
    <p>Use for multi-hour runs or environments where memory pressure is a concern.</p>
    <ul>
      <li><strong>Capture mode</strong>: Clicks + submit + nav only</li>
      <li><strong>Diff-based screenshots</strong>: On</li>
      <li><strong>Debounce (ms)</strong>: 900 to 1400</li>
      <li><strong>Page watch (dynamic UI)</strong>: On only when needed</li>
      <li><strong>Page watch interval (ms)</strong>: 1500 to 3000</li>
      <li><strong>Prune noisy input steps</strong>: On</li>
    </ul>

    <h3>Template D: Merge + Reorder Publishing Workflow</h3>
    <p>Use when combining multiple captures into one polished report.</p>
    <ul>
      <li><strong>Import raw ZIP</strong>: Merge into current report</li>
      <li><strong>Cross-tab timeline</strong>: Drag and drop to reposition timeline items</li>
      <li><strong>Step list</strong>: Use Move up / Move down for final ordering</li>
      <li><strong>Theme toggle</strong>: Choose light/dark during editing before export</li>
    </ul>

    <h2>Dynamic Screenshot Rule (ui-change)</h2>
    <ul>
      <li>If page watch interval is less than <code>10000ms</code>, forced screenshot interval is:</li>
      <li><code>max(4567.38ms, pageWatchMs * 1.34562)</code></li>
      <li>If page watch interval is <code>10000ms</code> or higher, dynamic forced screenshots are disabled for <code>ui-change</code>.</li>
    </ul>

    <h2>Report Editing</h2>
    <ul>
      <li>Edit step titles and notes inline.</li>
      <li>Annotate screenshots with pen/highlight/rect/outline/obfuscate/text.</li>
      <li>Use Undo/Clear on annotation layers.</li>
      <li>Reorder with drag/drop in timeline and Move up/Move down in the step list.</li>
      <li>Use the theme icon toggle to switch light/dark while editing.</li>
    </ul>

    <h2>Report Export / Import</h2>
    <ul>
      <li><strong>Export HTML bundle</strong>: Portable report with TOC and step anchors.</li>
      <li><strong>Export raw ZIP</strong>: Editable payload for re-import later.</li>
      <li><strong>Import raw ZIP</strong>: Import as new report or merge into active report.</li>
    </ul>

    <h2>Keyboard Shortcut</h2>
    <p><code>Ctrl+Shift+Y</code> toggles start/stop recording.</p>

    <h2>Privacy</h2>
    <p>All data remains in local browser storage. Screenshots are unmodified; redaction applies to report text fields.</p>
  </main>
</body>
</html>
