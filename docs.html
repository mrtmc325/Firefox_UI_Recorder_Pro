<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>UI Recorder Pro Documentation</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="report">
  <main class="docs">
    <h1>UI Recorder Pro — Documentation</h1>
    <p>Version 1.13.1. This patch finalizes controls-rail default states and placement polish for the report builder settings shell.</p>

    <h2>Version Notes (v1.13.1)</h2>
    <ul>
      <li>Burst frame storage now uses a disk-backed triple-collector spool pipeline (IndexedDB) so long sessions avoid local-storage screenshot bloat.</li>
      <li>Hotkey burst capture now writes lightweight <code>screenshotRef</code> metadata into events; frame bytes are lazy-loaded on demand in builder/export.</li>
      <li>Hotkey stop now uses a 2000ms grace window so final GIF burst frames can be captured before recording fully ends.</li>
      <li>Pressing the record hotkey again during the stop grace window performs an immediate stop.</li>
      <li>Synthetic pre-burst source rows are now condensed from visible step lists; replay cards remain inline in chronological flow.</li>
      <li>Loop-owned placeholder rows (<code>gif-loop-owned</code>) are now hidden from visible workflow sections and exported HTML.</li>
      <li>Hotkey GIF burst continuity now stays in one run across route/page navigation and only splits on GIF toggle boundaries or recording end.</li>
      <li>Popup now exposes live GIF loop diagnostics: active/inactive state, last frame timestamp, and pause reason.</li>
      <li>Burst playback now retries pending frame references and recovers frames that are still flushing to disk.</li>
      <li>On stop, recorder waits briefly for spool queues to drain before snapshot to reduce immediate post-stop frame misses.</li>
      <li>Documentation wording now matches live behavior for hotkey burst split boundaries (epoch/toggle-based), with selectable capture cadence (5/10/15 FPS) and tunable replay speed.</li>
      <li>Raw ZIP export/import now supports bundle v2 with <code>frame-manifest.json</code> + <code>frames/*</code> for full burst replay fidelity across re-import.</li>
      <li>Report builder step actions now use a precomputed event-position map to reduce per-render lookup overhead on larger reports.</li>
      <li>Default debug logging is now disabled in background/content/popup scripts for lower long-session console noise and overhead.</li>
      <li>Burst replay cards now auto-pause when offscreen and resume when visible.</li>
      <li>Burst player teardown now removes listeners/observers and releases frame/canvas resources more aggressively.</li>
      <li>Inline quick preview now unloads iframe content on collapse to avoid hidden memory growth.</li>
      <li>Fast click replay (GIF-style canvas loop) added with per-burst Play/Pause controls.</li>
      <li>Burst replay speed is configurable in the report builder and exported HTML uses the same selected speed.</li>
      <li>Hotkey GIF playback is marker-free (no numbered click overlays), with replay speed controls in builder/export.</li>
      <li>Click burst replay cards are embedded inline with workflow steps (time-ordered), not grouped into a separate top section.</li>
      <li>Exported HTML includes inline click burst replay cards that loop and can be paused.</li>
      <li>Recorder now attempts an automatic screenshot-backed lifecycle step on both <strong>Start</strong> and <strong>Stop</strong>.</li>
      <li>Normal mode keeps click screenshots only when click causes detectable UI update (unless force-screenshot is set).</li>
      <li>Hotkey GIF burst mode is unconditional for workflow-driving events and bypasses click UI probe delay, diff dedupe, and normal screenshot debounce/min-interval gates.</li>
      <li>Popup shows GIF burst mode status and lightweight pre-record controls for capture FPS (5/10/15).</li>
      <li>GIF burst mode is keyboard-driven during recording: <strong>Cmd+Opt+G</strong> (macOS target) / <strong>Ctrl+Alt+G</strong> (default).</li>
      <li>When GIF burst mode is ON, page-watch is automatically disabled; when OFF, your tuned page-watch settings resume.</li>
      <li>In hotkey GIF mode, one burst continues for the active hotkey run until mode is toggled OFF (or recording ends).</li>
      <li>Report builder header now mirrors extension identity (icon, name, description, and version) using manifest-driven values.</li>
      <li>Header icon/version zone compacted to an add-ons-sized badge for cleaner visual hierarchy.</li>
      <li>Quick Export Preview is now a first-class collapsible section in builder navigation and auto-refreshes while expanded.</li>
      <li>Export theme system expanded to 15 palettes and 15 fonts with multi-layout Table of Contents rendering.</li>
      <li>Export theme now includes adjustable typography sizes (title, short description, TOC text, section text).</li>
      <li>Heading theme profiles are available for Title, Heading 1, Heading 2, and Heading 3 for Word-style formatting control.</li>
      <li>Export theme editor is now condensed into collapsible groups for faster navigation and lower visual noise.</li>
      <li>Left controls rail now matches popup settings-card visuals (summary chips, compact spacing, and consistent control rhythm).</li>
      <li>Export-theme subgroup labels and row layouts were tightened to prevent clipped text and misaligned controls in narrow rails.</li>
      <li>Table of Contents labels now keep full readability options while preserving dense large-report behavior.</li>
      <li>Report history dropdown now shows report names first for faster selection.</li>
      <li>All v1.8.0 stability, strict active-tab capture, and merge/reorder capabilities are retained.</li>
    </ul>

    <h2>Install (Temporary Add-on)</h2>
    <ul>
      <li>Open <code>about:debugging#/runtime/this-firefox</code> in Firefox.</li>
      <li>Click <strong>Load Temporary Add-on…</strong></li>
      <li>Select <code>manifest.json</code> from the extension folder.</li>
    </ul>

    <h2>Quick Start</h2>
    <ol>
      <li>Click the toolbar icon.</li>
      <li>Press <strong>Start</strong>.</li>
      <li>Perform your workflow.</li>
      <li>Press <strong>Stop</strong>.</li>
      <li>Open report and export as HTML or raw ZIP as needed.</li>
    </ol>

    <h2>Configuration How-To Templates</h2>

    <h3>Template 0: Strict Active Tab Following</h3>
    <p>Use when multiple tabs/windows are open and only foreground interactions should be captured.</p>
    <ul>
      <li><strong>Follow active tab only (strict)</strong>: On</li>
      <li><strong>Capture mode</strong>: All events</li>
      <li><strong>Auto-resume on tab focus</strong>: On</li>
      <li><strong>Limitation</strong>: when Firefox has no focused window, capture is temporarily paused until focus returns.</li>
    </ul>

    <h3>Template A: Dynamic Dashboard / SPA</h3>
    <p>Use for pages with live updates, modals, and in-place content refreshes.</p>
    <ul>
      <li><strong>Capture mode</strong>: All events</li>
      <li><strong>Page watch (dynamic UI)</strong>: On</li>
      <li><strong>Page watch interval (ms)</strong>: 500 to 1200</li>
      <li><strong>Diff-based screenshots</strong>: On</li>
      <li><strong>Debounce (ms)</strong>: 700 to 1000</li>
    </ul>

    <h3>Template B: Login / Sensitive Workflow</h3>
    <p>Use for authentication and secure change-control walkthroughs.</p>
    <ul>
      <li><strong>Capture mode</strong>: All events</li>
      <li><strong>Redact sensitive text in report</strong>: On</li>
      <li><strong>Redact usernames on login pages</strong>: On</li>
      <li><strong>Page watch (dynamic UI)</strong>: On</li>
      <li><strong>Page watch interval (ms)</strong>: 600 to 1000</li>
    </ul>

    <h3>Template C: Long Session / Low Memory</h3>
    <p>Use for multi-hour runs or environments where memory pressure is a concern.</p>
    <ul>
      <li><strong>Capture mode</strong>: Clicks + submit + nav only</li>
      <li><strong>Diff-based screenshots</strong>: On</li>
      <li><strong>Debounce (ms)</strong>: 900 to 1400</li>
      <li><strong>Page watch (dynamic UI)</strong>: On only when needed</li>
      <li><strong>Page watch interval (ms)</strong>: 1500 to 3000</li>
      <li><strong>Prune noisy input steps</strong>: On</li>
    </ul>

    <h3>Template D: Merge + Reorder Publishing Workflow</h3>
    <p>Use when combining multiple captures into one polished report.</p>
    <ul>
      <li><strong>Import raw ZIP</strong>: Merge into current report</li>
      <li><strong>Cross-tab timeline</strong>: Drag and drop to reposition timeline items</li>
      <li><strong>Step list</strong>: Use Move up / Move down for final ordering</li>
      <li><strong>Theme toggle</strong>: Choose light/dark during editing before export</li>
    </ul>

    <h3>Template E: Professional Client Export</h3>
    <p>Use when the final deliverable needs cleaner branding and compact structure.</p>
    <ul>
      <li><strong>Export theme &gt; Palette</strong>: choose Extension Light / Cool Mist / Slate Calm</li>
      <li><strong>Export theme &gt; Font</strong>: choose a readable family for your audience</li>
      <li><strong>Export theme &gt; Report title size</strong>: adjust the editable title scale</li>
      <li><strong>Export theme &gt; Report description size</strong>: tune subtitle prominence</li>
      <li><strong>Export theme &gt; Table of Contents text size</strong>: tighten or enlarge TOC readability</li>
      <li><strong>Export theme &gt; Section text size</strong>: tune workflow step/body text size</li>
      <li><strong>Export theme &gt; Title/Heading themes</strong>: choose style presets for Title, Heading 1, Heading 2, and Heading 3</li>
      <li><strong>Export theme &gt; Table of Contents layout</strong>: use Compact cards for dense workflows</li>
      <li><strong>Export theme &gt; Table of Contents details</strong>: Host only for concise output, URL for technical detail</li>
      <li><strong>Export theme &gt; Accent</strong>: set your team or project color</li>
    </ul>

    <h2>Dynamic Screenshot Rule (ui-change)</h2>
    <ul>
      <li>If page watch interval is less than <code>10000ms</code>, forced screenshot interval is:</li>
      <li><code>max(4567.38ms, pageWatchMs * 1.34562)</code></li>
      <li>If page watch interval is <code>10000ms</code> or higher, dynamic forced screenshots are disabled for <code>ui-change</code>.</li>
    </ul>

    <h2>Report Editing</h2>
    <ul>
      <li>Edit step titles and notes inline.</li>
      <li>Annotate screenshots with pen/highlight/rect/outline/obfuscate/text.</li>
      <li>Use Undo/Clear on annotation layers.</li>
      <li>Reorder with drag/drop in timeline and Move up/Move down in the step list.</li>
      <li>Use builder navigation links and panel collapse controls to reduce visual noise.</li>
      <li>Use the theme icon toggle (sun/moon preview) to switch light/dark while editing.</li>
    </ul>

    <h2>Report Export / Import</h2>
    <ul>
      <li><strong>Export HTML bundle</strong>: Portable report with compact TOC, step anchors, and selected export theme profile.</li>
      <li><strong>Export raw ZIP</strong>: Editable payload for re-import later (bundle v2 includes frame manifest + frame files).</li>
      <li><strong>Import raw ZIP</strong>: Import as new report or merge into active report.</li>
      <li><strong>Compatibility</strong>: bundle v1 (inline screenshot ZIPs) remains supported on import.</li>
    </ul>

    <h2>Keyboard Shortcuts</h2>
    <ul>
      <li><code>Ctrl+Shift+Y</code> toggles start/stop recording.</li>
      <li>Hotkey stop grace: first <code>Ctrl+Shift+Y</code> stop press schedules stop in 2000ms; a second press during grace forces immediate stop.</li>
      <li><code>Cmd+Opt+G</code> (macOS target) / <code>Ctrl+Alt+G</code> (default) toggles high-speed GIF burst mode while recording.</li>
      <li>When ON, GIF burst mode attempts unconditional screenshot capture at the selected 5/10/15 FPS target cadence until toggled OFF.</li>
      <li>GIF burst behavior is hotkey-only; popup tuning is intentionally limited to capture FPS.</li>
      <li>Capture FPS is selectable (5/10/15) in popup GIF settings; replay speed is tuned in the report builder and carried into export.</li>
      <li>Replay timing uses measured source FPS per burst as the 1.0x baseline, so playback pace matches recorded cadence.</li>
      <li>Popup/API stop actions remain immediate and do not use the hotkey stop grace delay.</li>
      <li>If this shortcut conflicts with a browser shortcut, rebind the extension command from Firefox extension shortcuts.</li>
    </ul>

    <h2>Privacy</h2>
    <p>All data remains in local browser storage. Screenshots are unmodified; redaction applies to report text fields.</p>
  </main>
</body>
</html>
